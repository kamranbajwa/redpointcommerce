!function(t){function e(e){this.$element=t(e),this.original_text=this.$element.html(),this.settings=t.extend({},t.fn.trunk8.defaults)}function r(t){var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText}function n(t){if(r(t)===t)return t.split(/\s/g);for(var e,i,a=[],s=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,l=s.exec(t);l&&e!==s.lastIndex;)e=s.lastIndex,l[5]?a.push(l[5]):l[1]&&a.push({tag:l[1],attribs:l[2],content:l[3],after:l[4]}),l=s.exec(t);for(i=0;i<a.length;i++)"string"!=typeof a[i]&&a[i].content&&(a[i].content=n(a[i].content));return a}function i(e,r,n){e=e.replace(n,"");var i=function(r,a){var s,l,h,o,u="";for(o=0;o<r.length;o++)s=r[o],h=t.trim(e).split(" ").length,t.trim(e).length&&("string"==typeof s?(/<br\s*\/?>/.test(s)||(1===h&&t.trim(e).length<=s.length?(s=e,("p"===a||"div"===a)&&(s+=n),e=""):e=e.replace(s,"")),u+=t.trim(s)+(o===r.length-1||1>=h?"":" ")):(l=i(s.content,s.tag),s.after&&(e=e.replace(s.after,"")),l&&(s.after||(s.after=" "),u+="<"+s.tag+s.attribs+">"+l+"</"+s.tag+">"+s.after)));return u},a=i(r);return a.slice(a.length-n.length)===n&&(a+=n),a}function a(){var e,a,s,h,u,c,g=this.data("trunk8"),f=g.settings,p=f.width,d=f.side,m=f.fill,v=f.parseHTML,y=l.getLineHeight(this)*f.lines,S=g.original_text,x=S.length,b="";if(this.html(S),u=this.text(),v&&r(S)!==S&&(c=n(S),S=r(S),x=S.length),p===o.auto){if(this.height()<=y)return;for(e=0,a=x-1;a>=e;)s=e+(a-e>>1),h=l.eatStr(S,d,x-s,m),v&&c&&(h=i(h,c,m)),this.html(h),this.height()>y?a=s-1:(e=s+1,b=b.length>h.length?b:h);this.html(""),this.html(b),f.tooltip&&this.attr("title",u)}else isNaN(p)?t.error('Invalid width "'+p+'".'):(s=x-p,h=l.eatStr(S,d,s,m),this.html(h),f.tooltip&&this.attr("title",S))}var s,l,h={center:"center",left:"left",right:"right"},o={auto:"auto"};e.prototype.updateSettings=function(e){this.settings=t.extend(this.settings,e)},s={init:function(r){return this.each(function(){var n=t(this),i=n.data("trunk8");i||n.data("trunk8",i=new e(this)),i.updateSettings(r),a.call(n)})},update:function(e){return this.each(function(){var r=t(this);e&&(r.data("trunk8").original_text=e),a.call(r)})},revert:function(){return this.each(function(){var e=t(this).data("trunk8").original_text;t(this).html(e)})},getSettings:function(){return t(this.get(0)).data("trunk8").settings}},l={eatStr:function(e,r,n,i){var a,s,o=e.length,u=l.eatStr.generateKey.apply(null,arguments);if(l.eatStr.cache[u])return l.eatStr.cache[u];if(("string"!=typeof e||0===o)&&t.error('Invalid source string "'+e+'".'),0>n||n>o)t.error('Invalid bite size "'+n+'".');else if(0===n)return e;switch("string"!=typeof(i+"")&&t.error("Fill unable to be converted to a string."),r){case h.right:return l.eatStr.cache[u]=t.trim(e.substr(0,o-n))+i;case h.left:return l.eatStr.cache[u]=i+t.trim(e.substr(n));case h.center:return a=o>>1,s=n>>1,l.eatStr.cache[u]=t.trim(l.eatStr(e.substr(0,o-a),h.right,n-s,""))+i+t.trim(l.eatStr(e.substr(o-a),h.left,s,""));default:t.error('Invalid side "'+r+'".')}},getLineHeight:function(e){var r=t(e).css("float");"none"!==r&&t(e).css("float","none");var n=t(e).css("position");"absolute"===n&&t(e).css("position","static");var i,a=t(e).html(),s="line-height-test";return t(e).html("i").wrap('<div id="'+s+'" />'),i=t("#"+s).innerHeight(),t(e).html(a).css({"float":r,position:n}).unwrap(),i}},l.eatStr.cache={},l.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},t.fn.trunk8=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.trunk8"):s.init.apply(this,arguments)},t.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:h.right,tooltip:!0,width:o.auto,parseHTML:!1}}(jQuery);