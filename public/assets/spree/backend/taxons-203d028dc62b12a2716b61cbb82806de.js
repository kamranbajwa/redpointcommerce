(function(){$(document).ready(function(){return window.productTemplate=Handlebars.compile($("#product_template").text()),$("#taxon_products").sortable(),$("#taxon_products").on("sortstop",function(t,e){return $.ajax({url:Spree.routes.classifications_api,method:"PUT",data:{product_id:e.item.data("product-id"),taxon_id:$("#taxon_id").val(),position:e.item.index()}})}),$("#taxon_id").length>0&&$("#taxon_id").select2({dropdownCssClass:"taxon_select_box",placeholder:Spree.translations.find_a_taxon,ajax:{url:Spree.routes.taxons_search,datatype:"json",data:function(t,e){return{per_page:50,page:e,q:{name_cont:t}}},results:function(t,e){var a;return a=e<t.pages,{results:t.taxons,more:a}}},formatResult:function(t){return t.pretty_name},formatSelection:function(t){return t.pretty_name}}),$("#taxon_id").on("change",function(t){var e;return e=$("#taxon_products"),$.ajax({url:Spree.routes.taxon_products_api,data:{id:t.val},success:function(t){var a,n,o,r;if(e.empty(),0===t.products.length)return $("#sorting_explanation").hide(),$("#taxon_products").html("<h4>"+Spree.translations.no_results+"</h4>");for(r=t.products,n=0,o=r.length;o>n;n++)a=r[n],void 0!==a.master.images[0]&&void 0!==a.master.images[0].small_url&&(a.image=a.master.images[0].small_url),e.append(productTemplate({product:a}));return $("#sorting_explanation").show()}})})})}).call(this);