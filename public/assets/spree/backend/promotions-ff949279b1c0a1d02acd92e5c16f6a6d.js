var initProductActions=function(){"use strict";if($(document).on("mouseover mouseout","a.delete",function(t){"mouseover"===t.type?$(this).parent().addClass("action-remove"):$(this).parent().removeClass("action-remove")}),$("#promotion-filters").find(".variant_autocomplete").variantAutocomplete(),$(".calculator-fields").each(function(){var t=$(this),i=t.find(".type-select"),e=t.find(".settings"),n=t.find(".warning"),a=i.val();n.hide(),i.change(function(){$(this).val()===a?(n.hide(),e.show(),e.find("input").removeProp("disabled")):(n.show(),e.hide(),e.find("input").prop("disabled","disabled"))})}),$("#tier-fields-template").length&&$("#tier-input-name").length){var t=Handlebars.compile($("#tier-fields-template").html()),i=Handlebars.compile($("#tier-input-name").html()),e=$(".js-original-tiers").data("original-tiers");$.each(e,function(e,n){var a=i({base:e}).trim();$(".js-tiers").append(t({baseField:{value:e},valueField:{name:a,value:n}}))}),$(document).on("click",".js-add-tier",function(i){i.preventDefault(),$(".js-tiers").append(t({valueField:{name:null}}))}),$(document).on("click",".js-remove-tier",function(){$(this).parents(".tier").remove()}),$(document).on("change",".js-base-input",function(){var t=$(this).parents(".tier").find(".js-value-input");t.attr("name",i({base:$(this).val()}).trim())})}!function(){var t=function(){$(".promotion_action table").each(function(){0===$(this).find("td").length?$(this).hide():$(this).show()})};t();var i=function(){$(".remove_promotion_line_item").on("click",function(){var i=$($(".line_items_string")[0]),e=new RegExp($(this).data("variant-id")+"x\\d+");i.val(i.val().replace(e,"")),$(this).parents("tr").remove(),t()})};i(),$(".promotion_action.create_line_items button.add").unbind("click").click(function(){var e=$(this).parents(".promotion_action"),n=e.find('input[name="add_product_name"]').val(),a=e.find('input[name="add_variant_id"]').val(),o=e.find('input[name="add_quantity"]').val();if(a){var r="<tr><td>"+n+"</td><td>"+o+'</td><td><img src="/assets/admin/icons/cross.png"/></td></tr>';e.find("table").append(r);var d=e.find(".line_items_string");d.val(d.val()+","+a+"x"+o),i(),t()}return!1})}()};$(document).ready(function(){initProductActions()});